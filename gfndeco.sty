%===============================================================================
%    gfndeco.sty  (C) @bd_gfngfn on Twitter
%
%===============================================================================
\newcommand{\thicksection}[1]{
\clearpage
\noindent
\samepage
\begin{tikzpicture}
\draw[line width=2pt] (0,0) -- (\textwidth,0);
\draw[line width=1pt] (0,-5pt) -- (\textwidth,-5pt);
\end{tikzpicture}
\refstepcounter{section}
\parbox[c][3zw][c]{\textwidth}{\enskip\textsf{\LARGE \arabic{section} #1}}
\addcontentsline{toc}{section}{#1}
\begin{tikzpicture}
\draw[line width=1pt] (0,0) -- (\textwidth,0);
\draw[line width=2pt] (0,-5pt) -- (\textwidth,-5pt);
\end{tikzpicture}
\par
\nopagebreak
\vblank
}
%
\newcommand{\thicksectionnonum}[1]{
\clearpage
\noindent
\begin{tikzpicture}
\draw[line width=2pt] (0,0) -- (\textwidth,0);
\draw[line width=1pt] (0,-5pt) -- (\textwidth,-5pt);
\end{tikzpicture}
\parbox[c][3zw][c]{\textwidth}{\enskip\textsf{\LARGE \enskip#1}}
\begin{tikzpicture}
\draw[line width=1pt] (0,0) -- (\textwidth,0);
\draw[line width=2pt] (0,-5pt) -- (\textwidth,-5pt);
\end{tikzpicture}
\par
\nopagebreak
\vblank
}
%
\newcommand{\thicksubsection}[1]{
\noindent
\samepage
\refstepcounter{subsection}
\parbox[c][1.25zw][c]{\textwidth}{\textsf{\large \arabic{section}.\arabic{subsection} #1}}
\addcontentsline{toc}{subsection}{#1}
\parbox[c][1zw][t]{\textwidth}{
\begin{tikzpicture}
\draw[line width=1pt] (0,0)--(\textwidth,0);
\end{tikzpicture}
}
\par
\nopagebreak
\vblank
}
%==============================================================================
\newcommand{\newdecoclass}[1]{%
  \expandafter\newcommand\expandafter{\csname prefixof#1@gfndeco\endcsname}{\undefined@gfndeco}%
  \expandafter\newcommand\expandafter{\csname setprefixof#1\endcsname}[1]{\expandafter\renewcommand\expandafter{\csname prefixof#1@gfndeco\endcsname}{##1}}%
  \expandafter\newcommand\expandafter{\csname deco#1\endcsname}{\undefined@gfndeco}%
  \expandafter\newcommand\expandafter{\csname setstyleof#1\endcsname}[1]{\expandafter\renewcommand\expandafter{\csname deco#1\endcsname}[3][\relax]{\csname##1cmd\endcsname{####1}{####2}{####3}{\csname prefixof#1@gfndeco\endcsname}}}%
}%
%
% \newdecoclass{●} により \setprefixof●，\setstyleof● がそれぞれつくられる
% +--------------------------------------+
% |  \newdecoclass{●}                   |
% |  \setprefixof●{▲}                  |
% |  \setstyleof●{■}                   |
% +--------------------------------------+
% とすることで，分類●（例えば"def"）の接頭語が▲（例えば「定義」）に，スタイルが■（例えば"ul"）に設定される
% 以下は最初から使えるもの
\newdecoclass{def}\setprefixofdef{定義}
\newdecoclass{thm}\setprefixofthm{定理}
\newdecoclass{lem}\setprefixoflem{補題}
\newdecoclass{cor}\setprefixofcor{系}
%---基本----------------------------------------------------
\newcommand{\stdcmd}[4]{
\noindent
\refstepcounter{subsubsection}%
\if\relax#1\else\label{#1}\fi%
\textsf{#4\arabic{section}.\arabic{subsection}.\arabic{subsubsection}%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}
\par\nopagebreak
\indent
#3
\par
\allowbreak
\vblank
}
\newcommand{\stdplain}[3]{
\noindent
\textsf{#1\enskip#2}
\par
\nopagebreak
\indent
#3
\par
\vblank
}
\newcommand{\stdplainsmall}[1]{
\indent
{\footnotesize #1}
\par\vblank
}
%
%---下線つき----------------------------------------------------
\newcommand{\ulcmd}[4]{
\noindent
\refstepcounter{subsubsection}%
\if\relax#1\else\label{#1}\fi%
\underline{\textsf{#4\arabic{section}.\arabic{subsection}.\arabic{subsubsection}%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}}
\par\nopagebreak
\indent
#3
\par
\allowbreak
\vblank
}
\newcommand{\ulplain}[3]{
\noindent
\underline{\textsf{#1%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}}
\par
\nopagebreak
\indent
#3
\par
\allowbreak
\vblank
}
%
%---タイトル込み段落--------------------------------------------
\newcommand{\topcmd}[4]{
\noindent
\refstepcounter{subsubsection}%
\if\relax#1\else\label{#1}\fi%
\textsf{#4\arabic{section}.\arabic{subsection}.\arabic{subsubsection}%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}\quad#3
\par
\allowbreak
\vblank
}
\newcommand{\topplain}[3]{
\noindent
\textsf{#1%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}\quad#3
\par
\allowbreak
\vblank
}
%
%---箱入り------------------------------------------------------
\newcommand{\boxcmd}[4]{
\noindent
\begin{itembox}[l]{\textsf{#4%
\refstepcounter{subsubsection}%
\if\relax#1\else\label{#1}\fi%
\arabic{section}.\arabic{subsection}.\arabic{subsubsection}%
  \def\tempparam@gfndeco{#2}%
  \ifx\tempparam@gfndeco\empty%
    \relax%
  \else%
    \enskip#2%
  \fi%
}}
#3
\end{itembox}
\par
\vblank
}
\newcommand{\boxplain}[3]{
\noindent
\begin{itembox}[l]{\textsf{#1\enskip#2}}
#3
\end{itembox}
\par\vblank
}
